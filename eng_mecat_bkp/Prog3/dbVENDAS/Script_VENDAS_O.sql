create database VENDAS;

CREATE TABLE ESTADO (
CODIGOESTADO int auto_increment,
NOMEESTADO varchar(100),
UF char(2),
primary key (CODIGOESTADO)
);

create table CIDADE(
CODIGOCIDADE int auto_increment,
CODIGOESTADO int,
NOMECIDADE varchar(100),
primary key (CODIGOCIDADE),
foreign key (CODIGOESTADO) references ESTADO(CODIGOESTADO)
);

create table BAIRRO(
CODIGOBAIRRO int auto_increment,
CODIGOCIDADE int,
NOMEBAIRRO varchar(100),
primary key (CODIGOBAIRRO),
foreign key (CODIGOCIDADE) references CIDADE(CODIGOCIDADE)
);

create table TIPOLOGR(
CODTIPOLOGR int auto_increment,
NOMETIPOLOGR varchar(10),
ABVTIPOLOGR char(2),
primary key (CODTIPOLOGR)
);

create table LOGR(
CODLOGR int auto_increment,
CODTIPOLOGR int,
NOMELOGR varchar(100),
CODIGOBAIRRO int,
primary key(CODLOGR)
#foreign key (CODIGOBAIRRO) references BAIRRO(CODIGOBAIRRO),
#foreign key (CODTIPOLOGR) references TIPOLOG(CODTIPOLOGR)
);

create table CEP(
CODCEP int auto_increment,
CODLOGR int,
CEP int,
primary key (CODCEP),
foreign key (CODLOGR) references LOGR(CODLOGR)
);

create table ENDERECO(
CODIGOENDERECO int auto_increment,
CODTIPOLOGR INT,
CODLOGR int,
NUMERO int,
COMPLEMENTO varchar(100),
CODCEP int,
CODIGOBAIRRO int,
CODIGOCIDADE int,
CODIGOESTADO int,
primary key (CODIGOENDERECO),
FOREIGN KEY (CODTIPOLOGR) references TIPOLOGR(CODTIPOLOGR),
foreign key (CODLOGR) references LOGR(CODLOGR),
foreign key (CODCEP) references  CEP(CODCEP),
foreign key (CODIGOBAIRRO) references BAIRRO(CODIGOBAIRRO),
foreign key (CODIGOCIDADE) references CIDADE(CODIGOCIDADE),
foreign key (CODIGOESTADO) references ESTADO(CODIGOESTADO)
);

create table CLIENTE(
CODIGOCLIENTE int auto_increment,
CODIGOENDERECO int,
NOMECLIENTE varchar(100),
TELEFONE varchar(20),
CPF varchar(11),
primary key (CODIGOCLIENTE),
foreign key (CODIGOENDERECO) references ENDERECO(CODIGOENDERECO)
);

create table VENDEDOR(
CODIGOVENDEDOR int auto_increment,
NOMEVENDEDOR varchar(100),
SALARIOFIXO float,
FAIXACOMISSAO char(1),
primary key (CODIGOVENDEDOR)
);

create table PRODUTO(
CODIGOPROD int auto_increment,
UNIDADE varchar(5),
DESCRICAO varchar(100),
VALORUNIT float,
primary key (CODIGOPROD)
);

create table PEDIDO(
NUMPEDIDO int auto_increment,
CODIGOCLIENTE int,
CODIGOVENDEDOR int,
PRAZOENTREGA int,
primary key (NUMPEDIDO),
foreign key (CODIGOCLIENTE) references CLIENTE(CODIGOCLIENTE),
foreign key (CODIGOVENDEDOR) references VENDEDOR(CODIGOVENDEDOR)
);

create table ITEMPEDIDO(
CODITEMPEDIDO INT AUTO_INCREMENT,
NUMPEDIDO int,
CODIGOPROD int,
QUANTIDADE decimal,
primary key (CODITEMPEDIDO),
foreign key (NUMPEDIDO) references PEDIDO(NUMPEDIDO),
foreign key (CODIGOPROD) references PRODUTO(CODIGOPROD)
);

insert into ESTADO (CODIGOESTADO,NOMEESTADO,UF) values (1,'Mato Grosso do Sul','MS');
insert into ESTADO (CODIGOESTADO,NOMEESTADO,UF) values (2,'Sao Paulo','SP');

insert into CIDADE (CODIGOCIDADE,CODIGOESTADO,NOMECIDADE) VALUES(1,1,'Anastácio');
insert into CIDADE (CODIGOCIDADE,CODIGOESTADO,NOMECIDADE) VALUES(2,1,'Campo Grande');
insert into CIDADE (CODIGOCIDADE,CODIGOESTADO,NOMECIDADE) VALUES(3,2,'São Paulo');

INSERT INTO BAIRRO (CODIGOBAIRRO,CODIGOCIDADE,NOMEBAIRRO) VALUES(1,2,'Santo Amaro');
INSERT INTO BAIRRO (CODIGOBAIRRO,CODIGOCIDADE,NOMEBAIRRO) VALUES(2,2,'Centro');
INSERT INTO BAIRRO (CODIGOBAIRRO,CODIGOCIDADE,NOMEBAIRRO) VALUES(3,1,'Babilonia');
INSERT INTO BAIRRO (CODIGOBAIRRO,CODIGOCIDADE,NOMEBAIRRO) VALUES(4,3,'Morumbi');

INSERT INTO TIPOLOGR (CODTIPOLOGR,NOMETIPOLOGR,ABVTIPOLOGR) VALUES(1,'Avenida','Av');
INSERT INTO TIPOLOGR (CODTIPOLOGR,NOMETIPOLOGR,ABVTIPOLOGR) VALUES(2,'Rua','R.');
INSERT INTO TIPOLOGR (CODTIPOLOGR,NOMETIPOLOGR,ABVTIPOLOGR) VALUES(3,'Travessa','Tr');

INSERT INTO LOGR (CODLOGR,CODTIPOLOGR,NOMELOGR,CODIGOBAIRRO) VALUES(1,1,'Afonso Pena',2);
INSERT INTO LOGR (CODLOGR,CODTIPOLOGR,NOMELOGR,CODIGOBAIRRO) VALUES(2,1,'Presidente Vargas',1);
INSERT INTO LOGR (CODLOGR,CODTIPOLOGR,NOMELOGR,CODIGOBAIRRO) VALUES(3,2,'Ladeira',3);
INSERT INTO LOGR (CODLOGR,CODTIPOLOGR,NOMELOGR,CODIGOBAIRRO) VALUES(4,3,'Guimarães Rosa',4);

INSERT INTO CEP(CODCEP,CODLOGR,CEP) VALUES(1,1,79002072);
INSERT INTO CEP(CODCEP,CODLOGR,CEP) VALUES(2,2,79115810);
INSERT INTO CEP(CODCEP,CODLOGR,CEP) VALUES(3,3,77213451);
INSERT INTO CEP(CODCEP,CODLOGR,CEP) VALUES(4,4,77116917);

INSERT INTO ENDERECO(CODIGOENDERECO,CODLOGR,CODTIPOLOGR,NUMERO,COMPLEMENTO,CODCEP,CODIGOBAIRRO,CODIGOCIDADE,CODIGOESTADO) VALUES(1,1,1,105,'FUNDOS',1,1,1,1);
INSERT INTO ENDERECO(CODIGOENDERECO,CODLOGR,CODTIPOLOGR,NUMERO,COMPLEMENTO,CODCEP,CODIGOBAIRRO,CODIGOCIDADE,CODIGOESTADO) VALUES(2,3,2,30,'-',2,3,2,2);
INSERT INTO ENDERECO(CODIGOENDERECO,CODLOGR,CODTIPOLOGR,NUMERO,COMPLEMENTO,CODCEP,CODIGOBAIRRO,CODIGOCIDADE,CODIGOESTADO) VALUES(3,4,3,201,'APT. 50',2,3,2,2);

insert into CLIENTE(CODIGOCLIENTE,CODIGOENDERECO,NOMECLIENTE,TELEFONE,CPF) VALUES(1,2,'JOÃO SEMBRAÇO DA SILVA',6712345678,12365496152);
insert into CLIENTE(CODIGOCLIENTE,CODIGOENDERECO,NOMECLIENTE,TELEFONE,CPF) VALUES(2,1,'ZÉ NINGUEM DE SOUZA',6712345678,12365496152);
insert into CLIENTE(CODIGOCLIENTE,CODIGOENDERECO,NOMECLIENTE,TELEFONE,CPF) VALUES(3,3,'JOSEFINA DA SILVA',6712345678,12365496152);

INSERT INTO VENDEDOR(CODIGOVENDEDOR,NOMEVENDEDOR,SALARIOFIXO,FAIXACOMISSAO) VALUES(1,'Joao',1024,'A');
INSERT INTO VENDEDOR(CODIGOVENDEDOR,NOMEVENDEDOR,SALARIOFIXO,FAIXACOMISSAO) VALUES(2,'Maria',1024,'B');
INSERT INTO VENDEDOR(CODIGOVENDEDOR,NOMEVENDEDOR,SALARIOFIXO,FAIXACOMISSAO) VALUES(3,'Jose',1024,'C');

insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (1,'UNIT','CHOCOLATE ALPINO',4);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (2,'KG','BATATA',2);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (3,'UNIT','RAÇAO DE GATO',5.50);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (4,'UNIT','POTE PAÇOCA 50 UNID',6);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (5,'KG','LIMAO',3.10);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (6,'UNIT','BARRA CHOCOLATE 1KG',10.5);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (7,'UNIT','PNEU ARO 15',160);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (8,'KG','PIMENTA VERMELHA',1.30);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (9,'UNIT','AÇUCAR',2.5);
insert into PRODUTO (CODIGOPROD,UNIDADE,DESCRICAO,VALORUNIT) VALUES (10,'UNIT','CADERNO 10 MATERIAS',9.50);
#Exercicios
#1---------------
SELECT * FROM produto;
#2---------------

#5---------------
SELECT NOMECLIENTE,CPF,NOMETIPOLOGR,NOMELOGR,NUMERO,COMPLEMENTO,NOMEBAIRRO,NOMECIDADE,UF
FROM cliente c,cep cep,tipologr tl,logr l, endereco e,bairro b,cidade cd,estado uf
where c.CODIGOENDERECO=e.CODIGOENDERECO
AND e.CODTIPOLOGR=tl.CODTIPOLOGR
AND e.CODLOGR=l.CODLOGR
AND e.CODCEP=cep.CODCEP
AND e.CODIGOBAIRRO=b.CODIGOBAIRRO
AND e.CODIGOCIDADE=cd.CODIGOCIDADE
AND e.CODIGOESTADO=uf.CODIGOESTADO;

#7----------------
SELECT NOMECLIENTE,NOMECIDADE,NOMEESTADO FROM cliente #USANDO OR
INNER JOIN ENDERECO ON CLIENTE.CODIGOENDERECO=ENDERECO.CODIGOENDERECO
INNER JOIN ESTADO ON endereco.CODIGOESTADO=ESTADO.CODIGOESTADO 
INNER JOIN CIDADE ON endereco.CODIGOCIDADE=CIDADE.CODIGOCIDADE
WHERE endereco.CODIGOCIDADE IN(1, 2) AND endereco.CODIGOESTADO=1;

SELECT NOMECLIENTE FROM cliente #USANDO AND
INNER JOIN ENDERECO ON CLIENTE.CODIGOENDERECO=ENDERECO.CODIGOENDERECO
INNER JOIN ESTADO ON endereco.CODIGOESTADO=ESTADO.CODIGOESTADO 
WHERE ESTADO.UF IN('MS','SP');

#15---------------
SELECT NOMEVENDEDOR FROM vendedor WHERE FAIXACOMISSAO IN ('A','B');
#20
SELECT NOMEVENDEDOR,
(SALARIOFIXO*1.5)+150 AS novosalario
from vendedor
where FAIXACOMISSAO='C'
order by NOMEVENDEDOR
#21
select MIN(SALARIOFIXO) AS SALARIO_MINIMO,MAX(SALARIOFIXO)AS SALARIO_MAX FROM VENDEDOR;
#22
SELECT SUM(QUANTIDADE) FROM itempedido WHERE CODIGOPROD=3;
#23
SELECT AVG(SALARIOFIXO) FROM vendedor;
#24
SELECT count(*) FROM vendedor WHERE SALARIOFIXO > 2500
#QUAIS AS UNIDADES DE PRODUTOS DIFERENTES NA TAB PRODUTO
SELECT distinct UNIDADE FROM produto;
#LIKE '%ÃO_' ENXERGA QUALQUER NOME Q TERMINE EM ÃO
#LIKE '[CM]%' ENXERGA QUALQUER NOME Q COMECE COM C OU M
#LIKE '[C-X]%' ENXERGA QUALQUER NOME Q COMECE COM C ATE X
#LIKE 'M[^O}%' ENXERGA QUALQUER NOME Q COMECE COM M E N TENHA O COMO SEGUNDA LETRA

#13
SELECT CODIGOPROD, DESCRICAO FROM PRODUTO WHERE DESCRICAO LIKE 'C%';
#14
SELECT CODIGOVENDEDOR, NOMEVENDEDOR FROM vendedor WHERE NOMEVENDEDOR NOT LIKE 'Ma%';



